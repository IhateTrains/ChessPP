check for check in castling

add undomove
